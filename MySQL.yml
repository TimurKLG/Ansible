---
  - hosts: test

    tasks:
      - name:
        become: yes
        apt:
          name: python3-mysqldb
          state: latest

      - name: Create a new database with name 'bobdata'
        mysql_db:
            name: bobdata
            state: present

      - name: Copy database dump file
        become: yes
        copy:
           src: /etc/ansible/file_ansible/db_dump.sql
           dest: /tmp

      - name: Restore database
        mysql_db:
            name: my_db
            state: import
            target: /tmp/db_dump.sql

      - name: Dump all databases to hostname.sql
        mysql_db:
            state: dump
            name: all
            target: /tmp/{{ inventory_hostname }}.sql

      - name: Import file.sql similar to mysql -u <username> -p <password> < hostname.sql
        mysql_db:
            state: import
            name: all
            target: /tmp/{{ inventory_hostname }}.sql


